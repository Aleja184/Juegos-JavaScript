<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas width="600" height="400"></canvas>
    <script>
        let pantalla = document.querySelector("canvas");
        let pincel = pantalla.getContext("2d");
        pincel.fillStyle = "lightgrey";
        pincel.fillRect(0,0,600,400);
        var puedoDibujar = false; // Con el valor de esta variable podremos saber si el usuario est치 apretando o no el mouse.
        var tamanhoColor = 50;
        
        function dibujarCuadrado(x,y,ancho,alto,color){
            pincel.fillStyle = color;
            pincel.fillRect(x,y,ancho,alto);
        }

        function paletaColores(){
            dibujarCuadrado(0,0,tamanhoColor,tamanhoColor,"red");
            dibujarCuadrado(50,0,tamanhoColor,tamanhoColor,"green");
            dibujarCuadrado(100,0,tamanhoColor,tamanhoColor,"blue");
        }
        paletaColores();
        function escogerColor(evento){
            var x = evento.pageX - pantalla.offsetLeft;
            var y = evento.pageY - pantalla.offsetTop;
            if(y<=50){
                if(x<50){
                    pincel.fillStyle = "red";
                }else if(x>=50 && x<100){
                    pincel.fillStyle = "green";
                }else if(x>=100 & x<=150){
                    pincel.fillStyle = "blue";
                }
            }
        }

        //Esta funci칩n permite evaluar si el usuario est치 o no en la paleta de colores(area donde no podr치 dibujar)
        function puedoDibujarArea(coordenadaX,coordenadaY){
            if((coordenadaX>=0 && coordenadaX<=(tamanhoColor*3+10)) && (coordenadaY>=0 && coordenadaY<=(tamanhoColor+10))){
                return false;
            }else{
                return true;
            }
        }
       
        pantalla.onclick = escogerColor;
        function dibujarCirculo(x,y){
            if(puedoDibujar){
                pincel.beginPath();
                pincel.arc(x,y,10,0,360); 
                pincel.fill();    
            }
        }

        //Con esta funcion decidimos si el mouse dibuja o no los circulos.
        function capturarMovimientoMouse(evento){
            var x = evento.pageX - pantalla.offsetLeft;
            var y = evento.pageY - pantalla.offsetTop;
            if(puedoDibujarArea(x,y)){
                dibujarCirculo(x,y);
            }   
        }
        pantalla.onmousemove = capturarMovimientoMouse;

        function habilitarDibujo(){
            puedoDibujar = true;
        }

        function deshabilitarDibujo(){
            puedoDibujar = false;
        }

        pantalla.onmousedown = habilitarDibujo; // Cuando el usuario aprete el mouse, el valor de la variable puedoDibujar pasa a ser true.
        pantalla.onmouseup = deshabilitarDibujo;//Cuando se suelte el mouse el valor de la variable puedoDibujar pasa a ser false.
    </script>
</body>
</html>